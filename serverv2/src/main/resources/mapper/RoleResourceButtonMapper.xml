<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.kiwihouse.dao.mapper.RoleResourceButtonMapper">
	<resultMap id="RoleResourceButtonsMap" type="com.kiwihouse.dao.entity.RoleResourceButton">
        <result column="resource_id" jdbcType="INTEGER" property="resourceId"/>
        <result column="resource_button_id" jdbcType="INTEGER" property="resourceButtonId"/>
	</resultMap>
    <resultMap id="ResourceButtonsMap" type="com.kiwihouse.dao.entity.Buttons">
        <result column="resource_id" jdbcType="INTEGER" property="resourceId"/>
    </resultMap>

    
	<select id="buttonListById" parameterType="Integer" resultMap="ResourceButtonsMap">
		SELECT rb.* FROM `role_resource_button` rrb INNER JOIN button rb on rrb.resource_button_id = rb.id
		where 1 = 1
		<if test="roleId != null and roleId != ''">
		  and role_id = #{roleId}
		</if>
		<if test="resourceId != null and resourceId != ''">
          and resource_id = #{resourceId}
        </if>
	</select>
</mapper>